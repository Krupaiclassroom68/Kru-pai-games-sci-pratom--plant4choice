<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kru Pai Classroom ‚Äì Speed Quiz: ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡∏ä (4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</title>
<style>
  :root{
    --bg:#ffffff;--fg:#111;--primary:#2e7d32;--primary-2:#e8f5e9;--ok:#1b5e20;--bad:#c62828;--muted:#888;
  }
  html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,TH Sarabun New,Prompt,sans-serif;background:var(--bg);color:var(--fg);} 
  .wrap{max-width:900px;margin:0 auto;padding:20px 16px 64px;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;background:var(--primary-2);border-bottom:3px solid var(--primary);padding:14px 16px;border-radius:16px;margin-bottom:16px}
  header h1{font-size:clamp(18px,4vw,28px);margin:0;line-height:1.2}
  header .brand{font-weight:700;color:var(--primary)}
  .card{background:#fff;border:1px solid #eee;border-radius:18px;box-shadow:0 6px 24px rgba(0,0,0,.06);padding:18px;margin:14px 0}
  .start h2{margin:0 0 8px;font-size:clamp(18px,3.6vw,24px)}
  .row{display:grid;grid-template-columns:1fr;gap:12px}
  label{font-size:14px;color:#444}
  input[type=text]{width:100%;padding:14px 16px;border-radius:14px;border:1px solid #ddd;font-size:16px}
  button{cursor:pointer;border:none;padding:12px 18px;border-radius:14px;font-weight:700}
  .btn-primary{background:var(--primary);color:#fff}
  .btn-ghost{background:#f6f6f6}
  .meta{display:flex;gap:10px;flex-wrap:wrap;font-size:14px;color:#444}
  .chip{background:#f5f5f5;border-radius:999px;padding:6px 10px}
  .hidden{display:none}
  .qno{font-weight:700;color:var(--primary)}
  .question{font-size:18px;line-height:1.45;margin-bottom:10px}
  .opts{display:grid;gap:10px;margin-top:8px}
  .opt{border:1px solid #e5e5e5;border-radius:14px;padding:12px 14px;display:flex;gap:12px;align-items:flex-start}
  .opt input{margin-top:3px}
  .opt.correct{border-color:var(--ok);background:#f3fff4}
  .opt.wrong{border-color:var(--bad);background:#fff5f5}
  .explain{font-size:14px;color:#333;margin-top:8px;border-left:3px solid #eee;padding-left:10px}
  .statusbar{display:flex;gap:12px;align-items:center;justify-content:space-between;position:sticky;top:0;background:#fff;border:1px solid #eee;border-radius:14px;padding:10px 12px;margin:10px 0;z-index:5}
  .bar{flex:1;height:10px;background:#eee;border-radius:999px;overflow:hidden}
  .bar>i{display:block;height:100%;width:0;background:var(--primary)}
  .score{font-weight:800}
  .timer{font-feature-settings:"tnum" 1, "lnum" 1; font-variant-numeric:tabular-nums}
  .footer{text-align:center;color:#666;margin-top:24px}
  .result h2{margin:8px 0 4px}
  .badge{display:inline-block;background:var(--primary);color:#fff;padding:6px 10px;border-radius:999px;font-size:14px;font-weight:700}
  .grid-2{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:720px){.grid-2{grid-template-columns:1fr 1fr}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="brand">Kru Pai Classroom</div>
      <h1>Speed Quiz ‚Äì ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡∏ä (4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</h1>
    </div>
    <div class="badge" id="phase">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</div>
  </header>

  <!-- Start Screen -->
  <section id="start" class="card start">
    <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö üåø</h2>
    <p>‡πÉ‡∏™‡πà <strong>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ <b>10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠</b> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä</b> ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!</p>
    <div class="row grid-2">
      <div>
        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</label>
        <input id="player" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Mint"/>
      </div>
    </div>
    <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn-primary" id="btnStart" type="button">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </section>

  <!-- Quiz Screen -->
  <section id="quiz" class="hidden">
    <div class="statusbar">
      <div class="meta">
        <span>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: <strong id="who">-</strong></span>
        <span class="chip">‡∏Ç‡πâ‡∏≠ <span id="cur">1</span>/<span id="total">-</span></span>
        <span class="chip score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <span id="pts">0</span></span>
      </div>
      <div class="meta">
        <span class="timer">‚è≥ <span id="left">00</span>s</span>
      </div>
    </div>
    <div id="qArea" class="card"></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <button id="btnPrev" class="btn-ghost" type="button">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <button id="btnNext" class="btn-primary" type="button">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂</button>
      <button id="btnFinish" class="btn-ghost hidden" type="button">‡∏à‡∏ö‡πÄ‡∏Å‡∏°</button>
      <button id="btnBackHome" class="btn-ghost" type="button" onclick="return backHome(event)">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>
  </section>

  <!-- Result Screen -->
  <section id="result" class="hidden card result">
    <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô üéâ</h2>
    <p><strong id="sumName"></strong> ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <strong id="sumScore">0</strong> / <span id="sumTotal">0</span></p>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 6px">
      <button class="btn-primary" id="btnReview" type="button">‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢</button>
      <button class="btn-ghost" id="btnRestart" type="button" onclick="return backHome(event)">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>
    <div id="review" class="hidden"></div>
  </section>

  <div class="footer">¬© Kru Pai Classroom ¬∑ Speed Quiz 30 ‡∏Ç‡πâ‡∏≠</div>
</div>

<script>
// ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó/‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä
const TYPES = ["‡∏£‡∏≤‡∏Å","‡∏•‡∏≥‡∏ï‡πâ‡∏ô","‡πÉ‡∏ö","‡∏î‡∏≠‡∏Å","‡∏ú‡∏•/‡πÄ‡∏°‡∏•‡πá‡∏î","‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©"];

// ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 30 ‡∏Ç‡πâ‡∏≠: t = ‡∏î‡∏±‡∏ä‡∏ô‡∏µ TYPES
const BANK = [
  // ‡∏£‡∏≤‡∏Å
  {stem:"‡∏î‡∏π‡∏î‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡πÅ‡∏£‡πà‡∏ò‡∏≤‡∏ï‡∏∏‡∏à‡∏≤‡∏Å‡∏î‡∏¥‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏π‡πà‡∏û‡∏∑‡∏ä", t:0, note:"‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Å"},
  {stem:"‡∏¢‡∏∂‡∏î‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡πÉ‡∏ô‡∏î‡∏¥‡∏ô", t:0, note:"‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏¢‡∏∏‡∏á‡∏û‡∏∑‡∏ä‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏•‡πâ‡∏°"},
  {stem:"‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏∞‡∏™‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏±‡∏ô‡∏™‡∏≥‡∏õ‡∏∞‡∏´‡∏•‡∏±‡∏á ‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó", t:0, note:"‡∏£‡∏≤‡∏Å‡∏™‡∏∞‡∏™‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£"},
  {stem:"‡∏£‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÑ‡∏°‡πâ ‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡∏î‡∏ô‡πâ‡∏≥‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏¢‡πÉ‡∏à", t:0, note:"‡∏£‡∏≤‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©"},
  {stem:"‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡πÅ‡∏£‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏•‡∏≥‡∏ï‡πâ‡∏ô", t:0, note:"‡∏£‡∏≤‡∏Å ‚Üí ‡∏•‡∏≥‡∏ï‡πâ‡∏ô"},
  // ‡∏•‡∏≥‡∏ï‡πâ‡∏ô
  {stem:"‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡πÅ‡∏£‡πà‡∏ò‡∏≤‡∏ï‡∏∏‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Å‡πÑ‡∏õ‡∏™‡∏π‡πà‡πÉ‡∏ö", t:1, note:"‡∏ó‡πà‡∏≤‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á xylem"},
  {stem:"‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡πÉ‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä", t:1, note:"‡∏ó‡πà‡∏≤‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á phloem"},
  {stem:"‡∏û‡∏¢‡∏∏‡∏á‡πÉ‡∏ö ‡∏î‡∏≠‡∏Å ‡πÅ‡∏•‡∏∞‡∏ú‡∏• ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á/‡∏ú‡∏™‡∏°‡πÄ‡∏Å‡∏™‡∏£", t:1, note:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö"},
  {stem:"‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏Ç‡∏¥‡∏á ‡∏Ç‡πà‡∏≤)", t:1, note:"‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£"},
  {stem:"‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏û‡∏∑‡∏ä‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô", t:1, note:"‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡∏¢‡∏∑‡∏î‡∏¢‡∏≤‡∏ß"},
  // ‡πÉ‡∏ö
  {stem:"‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏™‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Ñ‡∏•‡∏≠‡πÇ‡∏£‡∏ü‡∏¥‡∏•‡∏•‡πå", t:2, note:"‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö"},
  {stem:"‡∏°‡∏µ‡∏õ‡∏≤‡∏Å‡πÉ‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡πä‡∏≤‡∏ã O‚ÇÇ/CO‚ÇÇ ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏ô‡πâ‡∏≥", t:2, note:"stomata"},
  {stem:"‡∏Ñ‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô", t:2, note:"transpiration"},
  {stem:"‡πÉ‡∏ö‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡∏î‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°", t:2, note:"‡πÉ‡∏ö‡∏™‡∏∞‡∏™‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£"},
  {stem:"‡πÉ‡∏ö‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡πà‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á", t:2, note:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á"},
  // ‡∏î‡∏≠‡∏Å
  {stem:"‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÅ‡∏ö‡∏ö‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡πÄ‡∏û‡∏®‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä‡∏î‡∏≠‡∏Å", t:3, note:"flower reproduction"},
  {stem:"‡∏Å‡∏•‡∏µ‡∏ö‡∏î‡∏≠‡∏Å‡∏°‡∏µ‡∏™‡∏µ/‡∏Å‡∏•‡∏¥‡πà‡∏ô ‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏ú‡∏π‡πâ‡∏ú‡∏™‡∏°‡πÄ‡∏Å‡∏™‡∏£", t:3, note:"attraction"},
  {stem:"‡πÄ‡∏Å‡∏™‡∏£‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏ì‡∏π (‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÄ‡∏û‡∏®‡∏ú‡∏π‡πâ)", t:3, note:"stamen/anther"},
  {stem:"‡∏£‡∏±‡∏á‡πÑ‡∏Ç‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏Å‡∏™‡∏£‡∏ï‡∏±‡∏ß‡πÄ‡∏°‡∏µ‡∏¢‡∏à‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•", t:3, note:"ovary ‚Üí fruit"},
  {stem:"‡∏¢‡∏≠‡∏î‡πÄ‡∏Å‡∏™‡∏£‡∏ï‡∏±‡∏ß‡πÄ‡∏°‡∏µ‡∏¢‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏™‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡∏™‡∏°", t:3, note:"stigma"},
  // ‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏•‡πá‡∏î
  {stem:"‡∏ú‡∏•‡∏´‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏°‡∏•‡πá‡∏î", t:4, note:"protection"},
  {stem:"‡∏ú‡∏•‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏•‡∏° ‡∏™‡∏±‡∏ï‡∏ß‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥", t:4, note:"dispersal"},
  {stem:"‡πÄ‡∏°‡∏•‡πá‡∏î‡∏°‡∏µ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏∞‡∏™‡∏°‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô", t:4, note:"endosperm/cotyledon"},
  {stem:"‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏•‡πá‡∏î‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô", t:4, note:"seed coat"},
  {stem:"‡∏Å‡∏≤‡∏£‡∏á‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏°‡∏•‡πá‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Å‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏ú‡∏•‡πà‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô", t:4, note:"radicle first"},
  // ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©
  {stem:"‡∏´‡∏ô‡∏≤‡∏°‡∏Å‡∏£‡∏∞‡∏ö‡∏≠‡∏á‡πÄ‡∏û‡∏ä‡∏£‡∏Ñ‡∏∑‡∏≠‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏¢‡∏ô‡πâ‡∏≥", t:5, note:"modified leaves"},
  {stem:"‡πÉ‡∏ö‡∏ï‡∏≥‡∏•‡∏∂‡∏á‡∏î‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∂‡∏î‡πÄ‡∏Å‡∏≤‡∏∞", t:5, note:"tendril = modified leaf"},
  {stem:"‡∏´‡∏±‡∏ß‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£", t:5, note:"tuber = stem"},
  {stem:"‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°‡∏Ñ‡∏∑‡∏≠‡πÉ‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏±‡πâ‡∏ô‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô", t:5, note:"bulb = leaves"},
  {stem:"‡∏£‡∏≤‡∏Å‡∏´‡∏≤‡∏¢‡πÉ‡∏à/‡∏£‡∏≤‡∏Å‡∏Ñ‡πâ‡∏≥‡∏¢‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¢‡∏∏‡∏á‡∏•‡∏≥‡∏ï‡πâ‡∏ô", t:5, note:"pneumatophore/prop root"}
];

function shuffle(arr){
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 30 ‡∏Ç‡πâ‡∏≠ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡∏Ç‡πâ‡∏≠‡∏à‡∏≤‡∏Å TYPES
function buildQuestions(){
  const bank = shuffle([...BANK]); // ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
  const qs = bank.map((b,idx)=>{
    const correct = TYPES[b.t];
    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏•‡∏ß‡∏á 3 ‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å TYPES ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
    const pool = TYPES.map((x,i)=>({name:x,i})).filter(x=>x.i!==b.t);
    shuffle(pool);
    const distractors = pool.slice(0,3).map(x=>x.name);
    const choices = shuffle([correct, ...distractors]);
    const answer = choices.indexOf(correct);
    return {
      no: idx+1,
      q: `‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä: ${b.stem}`,
      choices,
      answer,
      explain: `‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö: ${correct} ‚Äî ${b.note}`
    };
  });
  return qs;
}

const el = id=>document.getElementById(id);
const start = el('start');
const quiz = el('quiz');
const result = el('result');
const phase = el('phase');

let QUESTIONS = [];
el('total').textContent = 30;

let state = {i:0, score:0, secs:10, timer:null, remain:10, name:"-", answers:[]};

function fmt(n){return String(n).padStart(2,'0')}

function renderQ(){
  const item = QUESTIONS[state.i];
  el('cur').textContent = state.i+1; 
  const html = `
    <div class="qno">‡∏Ç‡πâ‡∏≠ ${state.i+1}</div>
    <div class="question">${item.q}</div>
    <div class="opts">
      ${item.choices.map((c,idx)=>{
        return `<label class="opt"><input type="radio" name="opt" value="${idx}"> <div>${idx+1}. ${c}</div></label>`
      }).join('')}
    </div>
    <div class="explain hidden" id="exp">${item.explain||''}</div>
  `;
  el('qArea').innerHTML = html;
  el('left').textContent = fmt(state.secs);
  const bar = document.createElement('div');
  bar.className = 'bar';
  const fill = document.createElement('i');
  bar.appendChild(fill);
  el('qArea').prepend(bar);
  let t = state.secs, total = state.secs;
  clearInterval(state.timer);
  state.timer = setInterval(()=>{
    t--; state.remain = t; el('left').textContent = fmt(Math.max(0,t));
    fill.style.width = `${100*(1 - (t/total))}%`;
    if(t<=0){ clearInterval(state.timer); lockAndCheck(null); }
  },1000);
  el('qArea').querySelectorAll('input[name="opt"]').forEach(r=>{
    r.addEventListener('change',()=> lockAndCheck(parseInt(r.value,10)) )
  });
  el('btnPrev').disabled = state.i===0;
  el('btnNext').classList.toggle('hidden', state.i===QUESTIONS.length-1);
  el('btnFinish').classList.toggle('hidden', state.i!==QUESTIONS.length-1);
}

function lockAndCheck(selected){
  clearInterval(state.timer);
  const item = QUESTIONS[state.i];
  const list = el('qArea').querySelectorAll('.opt');
  list.forEach((row,idx)=>{
    row.classList.remove('correct','wrong');
    const inp = row.querySelector('input');
    if(inp) inp.disabled = true;
    if(idx===item.answer) row.classList.add('correct');
    if(selected!==null){ if(idx===selected && selected!==item.answer) row.classList.add('wrong'); }
  });
  const ok = selected===item.answer; 
  if(selected!==null && ok){ state.score++; }
  state.answers[state.i] = {sel:selected, ok, correct:item.answer};
  el('pts').textContent = state.score;
  const exp = el('exp');
  if(exp && (item.explain||'').length){ exp.classList.remove('hidden'); }
}

// ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°
el('btnStart').onclick = ()=>{
  state.name = (el('player').value||'‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
  state.secs = 10;
  state.i=0; state.score=0; state.answers=[];
  el('who').textContent = state.name; el('pts').textContent = '0'; el('total').textContent = 30;
  QUESTIONS = buildQuestions(); // ‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°
  start.classList.add('hidden'); quiz.classList.remove('hidden'); result.classList.add('hidden'); phase.textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö';
  renderQ();
};

// ‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á
el('btnNext').onclick = ()=>{ if(state.i<QUESTIONS.length-1){ state.i++; renderQ(); } };
el('btnPrev').onclick = ()=>{ if(state.i>0){ state.i--; renderQ(); } };
el('btnFinish').onclick = ()=>{
  clearInterval(state.timer);
  quiz.classList.add('hidden'); result.classList.remove('hidden'); phase.textContent='‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•';
  el('sumName').textContent = state.name;
  el('sumScore').textContent = state.score;
  el('sumTotal').textContent = QUESTIONS.length;
};

// ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
el('btnReview').onclick = ()=>{
  const box = el('review');
  const rows = QUESTIONS.map((q,idx)=>{
    const ans = q.choices[q.answer];
    const pick = state.answers[idx]?.sel;
    const ok = state.answers[idx]?.ok;
    const pickTxt = (pick!=null)? q.choices[pick] : '‚Äî';
    return `<div class="card" style="margin:8px 0">
      <div><strong>‡∏Ç‡πâ‡∏≠ ${idx+1}:</strong> ${q.q}</div>
      <div style="margin-top:6px">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å: <span style="color:${ok?'var(--ok)':'var(--primary)'}">${ans}</span> ¬∑ ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏π: <em>${pickTxt}</em></div>
      ${q.explain? `<div class="explain">${q.explain}</div>`: ''}
    </div>`;
  }).join('');
  box.innerHTML = rows;
  box.classList.remove('hidden');
};

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (‡∏ú‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á inline ‡πÅ‡∏•‡∏∞ global)
function backHome(e){
  if(e) e.preventDefault();
  try { clearInterval(state.timer); } catch(_){}
  quiz.classList.add('hidden');
  result.classList.add('hidden');
  start.classList.remove('hidden');
  phase.textContent = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô';
  // reset ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥
  state.i = 0; state.score = 0; state.answers = [];
  return false;
}
window.backHome = backHome;
</script>
</body>
</html>
